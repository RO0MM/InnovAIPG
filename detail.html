<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Innov AI Tienda ‚Äî Detalle</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta name="description" content="Detalle del producto ‚Äî Innov AI Tienda. Servicios digitales con entrega inmediata y soporte 24/7 por WhatsApp.">
  <meta name="keywords" content="Innov AI Tienda, detalle, servicios digitales, IA, streaming, ChatGPT Plus, Canva, Perplexity, Gemini, Autodesk, CapCut">

  <link href="img/favicon.ico" rel="icon">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Bangers&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

  <!-- Libraries Stylesheet -->
  <link href="lib/animate/animate.min.css" rel="stylesheet">
  <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

  <!-- Bootstrap Template Stylesheet -->
  <link href="css/style.css" rel="stylesheet">

  <style>
    :root{
      --brand-primary:#0d6efd;

      --comic-title: "Bangers", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --comic-body: "Comic Neue", "Roboto", system-ui, -apple-system, Segoe UI, Arial, sans-serif;

      --card-radius:18px;
      --card-shadow: 0 12px 28px rgba(0,0,0,.10);

      --ok:#28a745;
      --bad:#dc3545;

      --wa-size:62px;
      --wa-bg:#25D366;

      --toast-bg: rgba(0,0,0,.86);
      --toast-fg:#fff;
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation-duration:.01ms !important; animation-iteration-count:1 !important; transition-duration:.01ms !important; scroll-behavior:auto !important; }
    }

    body{
      font-family: var(--comic-body);
      background:
        radial-gradient(circle at 1px 1px, rgba(0,0,0,.045) 1px, transparent 1px) 0 0/16px 16px,
        linear-gradient(180deg,#f7fbff,#ffffff 55%);
    }

    /* Header sticky (como tus otras p√°ginas) */
    .site-header.sticky-top{
      z-index:1045;
      box-shadow:0 2px 10px rgba(0,0,0,.14);
      background:#fff;
    }

    /* Caja principal */
    .panel{
      border-radius: var(--card-radius);
      box-shadow: var(--card-shadow);
      border: 1px solid rgba(0,0,0,.06);
      overflow: hidden;
    }

    .comic-h1{
      font-family: var(--comic-title);
      letter-spacing:.6px;
      text-transform: uppercase;
      line-height:1.05;
    }

    /* Carrusel: marco bonito + logo centrado */
    .media-wrap{
      border-radius: var(--card-radius);
      overflow:hidden;
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: var(--card-shadow);
      background:
        radial-gradient(circle at 30% 30%, rgba(13,110,253,.15), transparent 50%),
        radial-gradient(circle at 70% 70%, rgba(255,193,7,.18), transparent 55%),
        linear-gradient(180deg,#ffffff,#f3f6ff);
      min-height: 360px;
      position: relative;
    }
    .media-slide{
      min-height: 360px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 28px;
      text-decoration:none !important;
    }
    .media-slide img{
      max-width: 82%;
      max-height: 260px;
      width: auto;
      height: auto;
      object-fit: contain;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.12));
    }
    .media-caption{
      position:absolute;
      left: 14px;
      bottom: 12px;
      background: rgba(0,0,0,.60);
      color:#fff;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      display:flex;
      align-items:center;
      gap:.45rem;
    }

    /* Controles carrusel en c√≠rculos */
    .carousel-control-prev, .carousel-control-next{
      width: 54px;
      opacity: 1;
    }
    .carousel-control-prev i, .carousel-control-next i{
      background: rgba(255,255,255,.92);
      color:#111;
      border-radius: 999px;
      padding: 10px 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,.12);
    }

    /* Chips de estado */
    .chips{ display:flex; flex-wrap:wrap; gap:.45rem; margin: 10px 0 14px; }
    .chip{
      display:inline-flex; align-items:center; gap:.35rem;
      padding:.28rem .62rem;
      border-radius:999px;
      font-size:.82rem;
      border:1px solid rgba(0,0,0,.12);
      background:#fff;
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
      user-select:none;
      white-space:nowrap;
    }
    .chip i{ opacity:.9; }
    .chip.ok{ border-color: rgba(40,167,69,.35); background: rgba(40,167,69,.08); color:#1f7a33; }
    .chip.bad{ border-color: rgba(220,53,69,.35); background: rgba(220,53,69,.10); color:#b4232e; }
    .chip.soft{ background: rgba(13,110,253,.07); border-color: rgba(13,110,253,.22); color:#0b4fb8; }

    /* Tarjetitas de info (Entrega / Soporte / Garant√≠a / Tipo) */
    .info-grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 12px;
      margin: 14px 0;
    }
    @media(max-width: 992px){
      .info-grid{ grid-template-columns: 1fr; }
      .media-wrap, .media-slide{ min-height: 300px; }
    }
    .info-card{
      background: #fff;
      border: 2px dashed rgba(0,0,0,.14);
      border-radius: 16px;
      padding: 12px 14px;
      display:flex;
      gap: 12px;
      align-items:flex-start;
    }
    .info-ico{
      width: 38px;
      height: 38px;
      border-radius: 12px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(255,193,7,.22);
      border:1px solid rgba(0,0,0,.08);
      flex: 0 0 auto;
    }
    .info-card h6{ margin:0; font-weight:800; }
    .info-card p{ margin:2px 0 0; color:#6c757d; font-size:.92rem; }

    /* Precio */
    .price-row{
      display:flex;
      align-items:baseline;
      gap: 10px;
      margin: 8px 0 4px;
    }
    .price-main{
      font-size: 2.05rem;
      font-weight: 900;
      letter-spacing: .2px;
      font-family: var(--comic-body);
    }
    .price-sub{
      color:#6c757d;
      font-size:.95rem;
    }

    /* Botones */
    .btn-comic{
      border-radius: 14px;
      font-weight: 800;
      letter-spacing: .2px;
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
    }
    .btn-comic:active{ transform: translateY(1px); }

    /* ‚ÄúAgotado‚Äù overlay */
    .sold-out{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(220,53,69,.12);
      backdrop-filter: blur(2px);
      font-family: var(--comic-title);
      font-size: 2rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: #b4232e;
      text-shadow: 0 8px 18px rgba(0,0,0,.12);
      pointer-events:none;
    }

    /* WhatsApp FAB */
    .whatsapp-fab{
      position:fixed; right:18px; bottom:18px;
      width:var(--wa-size); height:var(--wa-size);
      border-radius:50%;
      background:var(--wa-bg);
      color:#fff;
      display:flex; align-items:center; justify-content:center;
      box-shadow:0 12px 26px rgba(0,0,0,.22);
      z-index:1200;
      transition: transform .18s, filter .18s;
    }
    .whatsapp-fab:hover{ transform: translateY(-3px); filter: saturate(1.1) brightness(1.04); color:#fff; text-decoration:none; }
    .whatsapp-fab i{ font-size: 28px; line-height:1; }
    .whatsapp-badge{
      position:absolute; top:-4px; right:-2px; min-width:18px; height:18px; padding:0 4px;
      border-radius:10px; background:#ff3b30; color:#fff; font-size:11px; font-weight:800;
      display:inline-flex; align-items:center; justify-content:center;
      box-shadow:0 2px 8px rgba(0,0,0,.25);
    }

    /* Toast */
    .toast-mini{
      position:fixed; left:50%; bottom:92px;
      transform:translateX(-50%) translateY(16px);
      background:var(--toast-bg);
      color:var(--toast-fg);
      padding:10px 14px;
      border-radius: 12px;
      display:flex;
      gap:.55rem;
      align-items:center;
      z-index:1400;
      opacity:0;
      transition:opacity .18s, transform .18s;
      box-shadow: 0 12px 22px rgba(0,0,0,.18);
      font-weight: 700;
    }
    .toast-mini.show{ opacity:1; transform:translateX(-50%) translateY(0); }

    /* Footer social */
    .btn-square{ width:38px; height:38px; display:inline-flex; align-items:center; justify-content:center; border-radius: 12px; }
  </style>
</head>

<body>
  <!-- ===== HEADER (puedes reemplazar por tu header completo si ya lo tienes igual en todas las p√°ginas) ===== -->
  <header class="site-header sticky-top">
    <div class="container-fluid">
      <div class="row bg-secondary py-1 px-xl-5">
        <div class="col-lg-6 d-none d-lg-block">
          <div class="d-inline-flex align-items-center h-100">
            <a class="text-body mr-3" href="acerca.html">Acerca de</a>
            <a class="text-body mr-3" href="contact.html">Contacto</a>
            <a class="text-body mr-3" href="ayuda.html">Ayuda</a>
            <a class="text-body mr-3" href="faq.html">Preguntas frecuentes</a>
          </div>
        </div>
        <div class="col-lg-6 text-center text-lg-right">
          <div class="d-inline-flex align-items-center d-none d-lg-inline-flex">
            <small class="text-muted mr-2">Soporte:</small>
            <a class="text-dark font-weight-bold" href="tel:+51991564053">+51 991564053</a>
          </div>

          <div class="d-inline-flex align-items-center d-block d-lg-none">
            <a href="cart.html" class="btn px-0 ml-2" aria-label="Carrito">
              <i class="fas fa-shopping-cart text-dark"></i>
              <span id="headerCartBadgeSm" class="badge text-dark border border-dark rounded-circle" style="padding-bottom:2px;">0</span>
            </a>
          </div>
        </div>
      </div>

      <div class="row align-items-center bg-light py-3 px-xl-5 d-none d-lg-flex">
        <div class="col-lg-4">
          <a href="index.html" class="text-decoration-none">
            <span class="h1 text-uppercase text-primary bg-dark px-2">INNOV</span>
            <span class="h1 text-uppercase text-dark bg-primary px-2 ml-n1">TIENDA</span>
          </a>
        </div>
        <div class="col-lg-4 col-6 text-left">
          <form action="buscar.html">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Buscar productos" aria-label="Buscar productos">
              <div class="input-group-append">
                <button class="input-group-text bg-transparent text-primary" aria-label="Buscar" type="submit">
                  <i class="fa fa-search"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
        <div class="col-lg-4 col-6 text-right">
          <a href="cart.html" class="btn px-0 ml-3" aria-label="Carrito">
            <i class="fas fa-shopping-cart text-primary"></i>
            <span id="headerCartBadge" class="badge text-secondary border border-secondary rounded-circle" style="padding-bottom:2px;">0</span>
          </a>
        </div>
      </div>
    </div>

    <div class="container-fluid bg-dark">
      <div class="row px-xl-5">
        <div class="col-lg-12">
          <nav class="navbar navbar-expand-lg bg-dark navbar-dark py-3 py-lg-0 px-0">
            <a href="index.html" class="text-decoration-none d-block d-lg-none">
              <span class="h1 text-uppercase text-dark bg-light px-2">INNOV</span>
              <span class="h1 text-uppercase text-light bg-primary px-2 ml-n1">TIENDA</span>
            </a>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
              <div class="navbar-nav mr-auto py-0">
                <a href="index.html" class="nav-item nav-link">Inicio</a>
                <a href="shop.html" class="nav-item nav-link">Tienda</a>
                <a href="detail.html" class="nav-item nav-link active">Detalle</a>
                <a href="cart.html" class="nav-item nav-link">Carrito</a>
                <a href="checkout.html" class="nav-item nav-link">Pagar</a>
                <a href="contact.html" class="nav-item nav-link">Contacto</a>
              </div>
              <div class="navbar-nav ml-auto py-0 d-none d-lg-block">
                <a href="cart.html" class="btn px-0 ml-3" aria-label="Carrito">
                  <i class="fas fa-shopping-cart text-primary"></i>
                  <span id="headerCartBadge2" class="badge text-secondary border border-secondary rounded-circle" style="padding-bottom:2px;">0</span>
                </a>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </header>
  <!-- ===== /HEADER ===== -->

  <!-- Breadcrumb -->
  <div class="container-fluid">
    <div class="row px-xl-5">
      <div class="col-12">
        <nav class="breadcrumb bg-light mb-30 panel" style="border-radius:14px;">
          <a class="breadcrumb-item text-dark" href="index.html">Inicio</a>
          <a class="breadcrumb-item text-dark" href="shop.html">Tienda</a>
          <span class="breadcrumb-item active">Detalle</span>
        </nav>
      </div>
    </div>
  </div>

  <!-- ===== DETAIL ===== -->
  <div class="container-fluid pb-5">
    <div class="row px-xl-5">

      <!-- Media -->
      <div class="col-lg-5 mb-30">
        <div class="media-wrap">
          <div id="mediaCarousel" class="carousel slide" data-ride="carousel">
            <ol id="mediaIndicators" class="carousel-indicators"></ol>
            <div id="mediaSlides" class="carousel-inner"></div>

            <a class="carousel-control-prev" href="#mediaCarousel" role="button" data-slide="prev" aria-label="Anterior">
              <i class="fa fa-angle-left"></i>
            </a>
            <a class="carousel-control-next" href="#mediaCarousel" role="button" data-slide="next" aria-label="Siguiente">
              <i class="fa fa-angle-right"></i>
            </a>
          </div>

          <!-- Overlay Agotado -->
          <div id="soldOutOverlay" class="sold-out" style="display:none;">
            AGOTADO
          </div>

          <div class="media-caption">
            <i class="fas fa-images"></i>
            <span id="mediaCaption">Galer√≠a</span>
          </div>
        </div>
      </div>

      <!-- Product Info -->
      <div class="col-lg-7 h-auto mb-30">
        <div class="h-100 bg-light p-30 panel" id="productPanel" style="border-radius:var(--card-radius);">
          <div class="d-flex align-items-start justify-content-between mb-2">
            <div>
              <div class="d-flex align-items-center justify-content-between">
                <small id="metaLeft" class="text-muted"></small>
              </div>
              <h2 id="productTitle" class="comic-h1 mb-2">Cargando‚Ä¶</h2>
            </div>
            <a href="shop.html" class="btn btn-sm btn-outline-secondary btn-comic">
              <i class="fas fa-arrow-left"></i> Volver
            </a>
          </div>

          <!-- Price -->
          <div class="price-row">
            <div class="price-main" id="productPrice">S/ --</div>
            <div class="price-sub" id="productUsd">‚âà $ -- USD</div>
          </div>

          <!-- Chips -->
          <div class="chips" id="chipsRow"></div>

          <p id="productDesc" class="mb-3 text-dark">‚Ä¶</p>

          <!-- Info cards -->
          <div class="info-grid">
            <div class="info-card">
              <div class="info-ico"><i class="fas fa-bolt"></i></div>
              <div>
                <h6>Entrega</h6>
                <p>R√°pida por WhatsApp / correo</p>
              </div>
            </div>
            <div class="info-card">
              <div class="info-ico"><i class="fas fa-headset"></i></div>
              <div>
                <h6>Soporte</h6>
                <p>24/7 por WhatsApp</p>
              </div>
            </div>
            <div class="info-card">
              <div class="info-ico"><i class="fas fa-shield-alt"></i></div>
              <div>
                <h6>Garant√≠a</h6>
                <p>Ayuda en activaci√≥n</p>
              </div>
            </div>
            <div class="info-card">
              <div class="info-ico"><i class="fas fa-tags"></i></div>
              <div>
                <h6>Tipo de venta</h6>
                <p id="saleTypeText">Por menor</p>
              </div>
            </div>
          </div>

          <!-- Benefits -->
          <div class="mb-3">
            <h5 class="font-weight-bold mb-2"><i class="fas fa-star text-warning"></i> Beneficios</h5>
            <ul id="benefitsList" class="mb-0" style="padding-left: 18px;"></ul>
          </div>

          <!-- Qty + Actions -->
          <div class="d-flex align-items-center flex-wrap mt-3">
            <div class="input-group quantity mr-3 mb-2" style="width:140px;">
              <div class="input-group-btn">
                <button class="btn btn-primary btn-minus" type="button" aria-label="Restar"><i class="fa fa-minus"></i></button>
              </div>
              <input id="qtyInput" type="text" class="form-control bg-secondary border-0 text-center" value="1" inputmode="numeric" aria-label="Cantidad">
              <div class="input-group-btn">
                <button class="btn btn-primary btn-plus" type="button" aria-label="Sumar"><i class="fa fa-plus"></i></button>
              </div>
            </div>

            <button id="btnAdd" class="btn btn-primary btn-comic px-3 mb-2" type="button">
              <i class="fa fa-shopping-cart mr-1"></i> A√±adir
            </button>
            <button id="btnBuy" class="btn btn-dark btn-comic px-3 ml-2 mb-2" type="button">
              <i class="fas fa-bolt mr-1"></i> Comprar ahora
            </button>
          </div>

          <!-- Social -->
          <div class="d-flex align-items-center mt-3">
            <strong class="text-dark mr-2">S√≠guenos:</strong>
            <div class="d-inline-flex">
              <a class="text-dark px-2" href="https://www.facebook.com/profile.php?id=61585560703359" target="_blank" rel="noopener" aria-label="Facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a class="text-dark px-2" href="https://www.instagram.com/innov_iaa/" target="_blank" rel="noopener" aria-label="Instagram">
                <i class="fab fa-instagram"></i>
              </a>
              <a class="text-dark px-2" href="https://www.tiktok.com/@innoovia" target="_blank" rel="noopener" aria-label="TikTok">
                <i class="fab fa-tiktok"></i>
              </a>
            </div>
          </div>

          <small class="d-block mt-3 text-muted">
            *No estamos afiliados a marcas. Servicio digital con entrega por WhatsApp/correo.
          </small>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="row px-xl-5">
      <div class="col">
        <div class="bg-light p-30 panel">
          <div class="nav nav-tabs mb-4">
            <a class="nav-item nav-link text-dark active" data-toggle="tab" href="#tab-desc">Descripci√≥n</a>
            <a class="nav-item nav-link text-dark" data-toggle="tab" href="#tab-info">M√°s informaci√≥n</a>
          </div>

          <div class="tab-content">
            <div class="tab-pane fade show active" id="tab-desc">
              <h4 class="mb-3">¬øQu√© est√°s comprando?</h4>
              <p id="descLong">Cargando‚Ä¶</p>
            </div>

            <div class="tab-pane fade" id="tab-info">
              <h4 class="mb-3">Detalles</h4>
              <div class="row">
                <div class="col-md-6">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item px-0">Entrega: WhatsApp / correo</li>
                    <li class="list-group-item px-0">Soporte: 24/7</li>
                    <li class="list-group-item px-0">Garant√≠a: activaci√≥n</li>
                  </ul>
                </div>
                <div class="col-md-6">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item px-0" id="infoCycle">Duraci√≥n: ‚Äî</li>
                    <li class="list-group-item px-0" id="infoDevice">Dispositivos: ‚Äî</li>
                    <li class="list-group-item px-0" id="infoNotes">Notas: ‚Äî</li>
                  </ul>
                </div>
              </div>
              <div class="alert alert-warning mt-3 mb-0">
                <strong>Tip:</strong> Si deseas ‚Äúcuenta completa / proveedor‚Äù, revisa la secci√≥n <b>Cuentas completas</b> en la tienda.
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Recomendados (vinculados por id) -->
    <div class="container-fluid py-5">
      <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
        <span class="bg-secondary pr-3">Recomendados</span>
      </h2>

      <div class="row px-xl-5">
        <div class="col">
          <div id="recommendedRow" class="row"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- ===== /DETAIL ===== -->

  <!-- Footer -->
  <div class="container-fluid bg-dark text-secondary mt-5 pt-5">
    <div class="row px-xl-5 pt-5">
      <div class="col-lg-4 col-md-12 mb-5 pr-3 pr-xl-5">
        <h5 class="text-secondary text-uppercase mb-4">Cont√°ctanos</h5>
        <p class="mb-4">Tienda tecnol√≥gica con entrega inmediata y soporte 24/7. IA, streaming y herramientas premium.</p>
        <p class="mb-2"><i class="fa fa-map-marker-alt text-primary mr-3"></i>Lima ‚Äî San Isidro ‚Äî Per√∫</p>
        <p class="mb-2"><i class="fa fa-envelope text-primary mr-3"></i><a href="mailto:ainnov611@gmail.com" class="text-secondary">ainnov611@gmail.com</a></p>
        <p class="mb-0"><i class="fa fa-phone-alt text-primary mr-3"></i><a href="tel:+51991564053" class="text-secondary">+51 991564053</a></p>
      </div>

      <div class="col-lg-8 col-md-12">
        <div class="row">
          <div class="col-md-4 mb-5">
            <h5 class="text-secondary text-uppercase mb-4">Compra r√°pida</h5>
            <div class="d-flex flex-column justify-content-start">
              <a class="text-secondary mb-2" href="index.html"><i class="fa fa-angle-right mr-2"></i>Inicio</a>
              <a class="text-secondary mb-2" href="shop.html"><i class="fa fa-angle-right mr-2"></i>Tienda</a>
              <a class="text-secondary mb-2" href="cart.html"><i class="fa fa-angle-right mr-2"></i>Carrito</a>
              <a class="text-secondary mb-2" href="checkout.html"><i class="fa fa-angle-right mr-2"></i>Pagar</a>
              <a class="text-secondary" href="contact.html"><i class="fa fa-angle-right mr-2"></i>Contacto</a>
            </div>
          </div>

          <div class="col-md-4 mb-5">
            <h5 class="text-secondary text-uppercase mb-4">Ayuda</h5>
            <div class="d-flex flex-column justify-content-start">
              <a class="text-secondary mb-2" href="faq.html"><i class="fa fa-angle-right mr-2"></i>Preguntas frecuentes</a>
              <a class="text-secondary mb-2" href="ayuda.html"><i class="fa fa-angle-right mr-2"></i>Soporte</a>
              <a class="text-secondary" href="contact.html"><i class="fa fa-angle-right mr-2"></i>Escr√≠benos</a>
            </div>
          </div>

          <div class="col-md-4 mb-5">
            <h5 class="text-secondary text-uppercase mb-4">S√≠guenos</h5>
            <div class="d-flex">
              <a class="btn btn-primary btn-square mr-2" href="https://www.facebook.com/profile.php?id=61585560703359" target="_blank" rel="noopener" aria-label="Facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a class="btn btn-primary btn-square mr-2" href="https://www.tiktok.com/@innoovia" target="_blank" rel="noopener" aria-label="TikTok">
                <i class="fab fa-tiktok"></i>
              </a>
              <a class="btn btn-primary btn-square" href="https://www.instagram.com/innov_iaa/" target="_blank" rel="noopener" aria-label="Instagram">
                <i class="fab fa-instagram"></i>
              </a>
            </div>

            <div class="mt-3">
              <a class="btn btn-outline-light btn-sm btn-comic" href="shop.html">
                <i class="fas fa-store"></i> Ver tienda
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row border-top mx-xl-5 py-4" style="border-color: rgba(256, 256, 256, .1) !important;">
      <div class="col-md-6 px-xl-0">
        <p class="mb-md-0 text-center text-md-left text-secondary">
          &copy; <a class="text-primary" href="#">Innov AI Tienda</a>. Todos los derechos reservados.
        </p>
      </div>
      <div class="col-md-6 px-xl-0 text-center text-md-right">
        <img class="img-fluid" src="img/payments.png" alt="M√©todos de pago">
      </div>
    </div>
  </div>

  <!-- Back to Top -->
  <a href="#" class="btn btn-primary back-to-top" aria-label="Volver arriba"><i class="fa fa-angle-double-up"></i></a>

  <!-- WhatsApp FAB -->
  <a id="whatsappFab" class="whatsapp-fab" href="https://wa.me/message/QVACXXZM5RP7A1" target="_blank" rel="noopener" aria-label="Abrir WhatsApp">
    <i class="fab fa-whatsapp"></i>
    <span id="whatsappBadge" class="whatsapp-badge" aria-hidden="true">1</span>
  </a>

  <!-- Toast -->
  <div id="toastMini" class="toast-mini" role="status" aria-live="polite" aria-atomic="true">
    <i class="fas fa-check-circle"></i>
    <span id="toastText">A√±adido al carrito</span>
  </div>

  <!-- JS libraries -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/owlcarousel/owl.carousel.min.js"></script>
  <script src="js/main.js"></script>

  <script>
    (function(){
      /* =========================
         CONFIG
      ========================= */
      const FX = 3.70; // 1 USD = 3.70 PEN
      const CART_KEY = 'innov_cart_v1';

      const SOCIAL = {
        facebook: 'https://www.facebook.com/profile.php?id=61585560703359',
        instagram: 'https://www.instagram.com/innov_iaa/',
        tiktok: 'https://www.tiktok.com/@innoovia'
      };

      /* =========================
         IM√ÅGENES POR LINK (Wikimedia)
         - Son SVG livianos y no cargan tu servidor
      ========================= */
      const IMG = {
        chatgpt:    "https://upload.wikimedia.org/wikipedia/commons/0/04/ChatGPT_logo.svg",
        canva:      "https://upload.wikimedia.org/wikipedia/commons/b/b8/Canva_logo.svg",
        perplexity: "https://upload.wikimedia.org/wikipedia/commons/1/1d/Perplexity_AI_logo.svg",
        gemini:     "https://upload.wikimedia.org/wikipedia/commons/d/d9/Google_Gemini_logo_2025.svg",
        autodesk:   "https://upload.wikimedia.org/wikipedia/commons/4/41/Autodesk_Logo_2021.svg",
        capcut:     "https://upload.wikimedia.org/wikipedia/commons/1/1c/Capcut-icon.svg",

        netflix:    "https://upload.wikimedia.org/wikipedia/commons/6/69/Netflix_logo.svg",
        disney:     "https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg",
        hbomax:     "https://upload.wikimedia.org/wikipedia/commons/1/17/HBO_Max_Logo.svg",
        prime:      "https://upload.wikimedia.org/wikipedia/commons/1/11/Amazon_Prime_Video_logo.svg",
        youtube:    "https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg",
        crunchy:    "https://upload.wikimedia.org/wikipedia/commons/f/f6/Crunchyroll_Logo.svg",
        vix:        "https://upload.wikimedia.org/wikipedia/commons/6/6a/ViX_Logo.svg",
        directv:    "https://upload.wikimedia.org/wikipedia/commons/0/0b/Directv-logo.svg",
        ms365:      "https://upload.wikimedia.org/wikipedia/commons/3/32/Microsoft_365_logo.svg"
      };

      /* =========================
         CAT√ÅLOGO (m√≠nimo para detalle + carrusel)
         - IMPORTANTE: estos IDs deben coincidir con shop.html
      ========================= */
      const PRODUCTS = [
        // IA (Por menor)
        {
          id:'gpt-plus-8',
          name:'ChatGPT Plus ‚Äî 1 mes (PC/Celular)',
          price:8,
          currency:'PEN',
          cat:'ai',
          saleType:'Por menor',
          cycle:'Mensual',
          device:'PC / Celular',
          usersLabel:'M√°s usuarios',
          cupo: 20,
          available:true,
          image: IMG.chatgpt,
          desc:'Puede ser para celular o PC. Mensual. Tiene m√°s usuarios.',
          benefits:[
            'Mensual (30 d√≠as)',
            'Ideal para estudio y trabajo',
            'M√°s usuarios (mejor disponibilidad)',
            'Entrega r√°pida + soporte 24/7'
          ],
          notes:'Acceso digital. Entrega por WhatsApp / correo.',
          gallery:[
            {img: IMG.chatgpt, label:'ChatGPT Plus', href:'detail.html?id=gpt-plus-8'},
            {img: IMG.perplexity, label:'Perplexity (recomendado)', href:'detail.html?id=perplexity-15'},
            {img: IMG.canva, label:'Canva Pro', href:'detail.html?id=canva-1y-10'}
          ]
        },
        {
          id:'gpt-plus-12',
          name:'ChatGPT Plus ‚Äî Celular (1 mes)',
          price:12,
          cat:'ai',
          saleType:'Por menor',
          cycle:'Mensual',
          device:'Solo Celular',
          usersLabel:'Pocos usuarios',
          cupo: 15,
          available:true,
          image: IMG.chatgpt,
          desc:'Solo para celular. Pocos usuarios, no se satura.',
          benefits:[
            'Solo Celular / Tablet',
            'Pocos usuarios (menos saturaci√≥n)',
            'Mensual (30 d√≠as)',
            'Soporte 24/7'
          ],
          notes:'Recomendado si solo usar√°s en tel√©fono.'
        },
        {
          id:'gpt-plus-18',
          name:'ChatGPT Plus ‚Äî PC/Laptop (1 mes) + Regalo Perplexity',
          price:18,
          cat:'ai',
          saleType:'Por menor',
          cycle:'Mensual',
          device:'PC/Laptop (Windows 10/11, macOS)',
          usersLabel:'Regalo Perplexity',
          cupo: 6,            // como en tu captura
          available:true,
          image: IMG.chatgpt,
          desc:'Solo PC/Laptop. Incluye Perplexity de regalo.',
          benefits:[
            'Solo PC/Laptop (Windows 10/11, macOS)',
            'Mensual (30 d√≠as)',
            'Incluye Perplexity de regalo',
            'Soporte 24/7'
          ],
          notes:'Ideal si quieres estabilidad en PC + extra.',
          gallery:[
            {img: IMG.chatgpt, label:'ChatGPT', href:'detail.html?id=gpt-plus-18'},
            {img: IMG.perplexity, label:'Regalo Perplexity', href:'detail.html?id=perplexity-15'},
            {img: IMG.gemini, label:'Gemini Pro', href:'detail.html?id=gemini-pro-15'},
            {img: IMG.canva, label:'Canva Pro', href:'detail.html?id=canva-1y-10'}
          ]
        },

        // CapCut
        {
          id:'capcut-pro-10',
          name:'CapCut Pro ‚Äî 1 mes (1 dispositivo)',
          price:10,
          cat:'otros',
          saleType:'Por menor',
          cycle:'Mensual',
          device:'1 dispositivo',
          usersLabel:'Pro',
          cupo: 18,
          available:true,
          image: IMG.capcut,
          desc:'CapCut Pro mensual. 1 dispositivo.',
          benefits:[
            'Pro mensual (30 d√≠as)',
            '1 dispositivo',
            'Exportaci√≥n sin marca de agua',
            'Efectos premium + plantillas'
          ],
          notes:'Perfecto para creadores de contenido.'
        },

        // Gemini / Google One
        {
          id:'gemini-pro-15',
          name:'Gemini PRO + 2 TB Google One ‚Äî 1 a√±o',
          price:15,
          cat:'ai',
          saleType:'Por menor',
          cycle:'Anual',
          device:'Cuenta Gmail propia',
          usersLabel:'2 TB',
          cupo: 12,
          available:true,
          image: IMG.gemini,
          desc:'üöÄ Gemini PRO + ‚òÅ 2 TB Google One ‚Äî activaci√≥n en tu propio Gmail.',
          benefits:[
            'üöÄ Gemini Pro 3.1',
            'üé¨ Creaci√≥n de videos con IA',
            'üß† Notas inteligentes y automatizaci√≥n',
            '‚úâ IA en Gmail, Docs y Meet',
            '‚òÅ 2 TB Google One',
            'üìß Activaci√≥n en tu Gmail'
          ],
          notes:'Incluye Flow. 1 a√±o.'
        },
        {
          id:'google-one-15',
          name:'Google One 2 TB + Gemini ‚Äî 1 a√±o (a tu correo)',
          price:15,
          cat:'otros',
          saleType:'Por menor',
          cycle:'Anual',
          device:'Cuenta Gmail propia',
          usersLabel:'2 TB + IA',
          cupo: 10,
          available:true,
          image: IMG.gemini,
          desc:'2 TB de almacenamiento + Gemini activado en tu correo propio.',
          benefits:[
            '‚òÅ 2 TB Google One',
            'ü§ñ Gemini Pro 3.1',
            'üé¨ Videos con IA',
            '‚úâ IA en Gmail, Docs y Meet',
            'üìß Activaci√≥n directa en tu Gmail'
          ],
          notes:'Ideal para almacenamiento + IA integrada.'
        },

        // Perplexity
        {
          id:'perplexity-15',
          name:'Perplexity ‚Äî 1 a√±o',
          price:15,
          cat:'ai',
          saleType:'Por menor',
          cycle:'Anual',
          device:'Cuenta propia',
          usersLabel:'IA avanzadas',
          cupo: 25,
          available:true,
          image: IMG.perplexity,
          desc:'üöÄ IA avanzadas + b√∫squedas inteligentes con fuentes reales. Activaci√≥n en tu cuenta.',
          benefits:[
            'üöÄ Acceso a IA avanzadas (GPT-5.2, Claude, Gemini 3 y m√°s)',
            'üîç B√∫squedas con fuentes reales',
            '‚ö° Respuestas r√°pidas y profesionales',
            'üì¶ Activaci√≥n directa en tu cuenta üîê'
          ],
          notes:'Plan anual.'
        },

        // Canva (planes)
        {
          id:'canva-1y-10',
          name:'Canva Pro ‚Äî 1 a√±o',
          price:10,
          cat:'otros',
          saleType:'Por menor',
          cycle:'Anual',
          device:'Cuenta propia',
          usersLabel:'Pro',
          cupo: 30,
          available:true,
          image: IMG.canva,
          desc:'Canva Pro por 1 a√±o.',
          benefits:['Plantillas premium','Recursos Pro','Dise√±o r√°pido','Ideal redes sociales'],
          notes:'Activaci√≥n seg√∫n modalidad.'
        },
        { id:'canva-2y-17', name:'Canva Pro ‚Äî 2 a√±os', price:17, cat:'otros', saleType:'Por menor', cycle:'2 a√±os', device:'Cuenta propia', usersLabel:'Pro', cupo: 25, available:true, image: IMG.canva,
          desc:'Canva Pro por 2 a√±os.',
          benefits:['Ahorro','Recursos Pro','Dise√±o r√°pido','Soporte'],
          notes:'2 a√±os.'
        },
        { id:'canva-3y-25', name:'Canva Pro ‚Äî 3 a√±os', price:25, cat:'otros', saleType:'Por menor', cycle:'3 a√±os', device:'Cuenta propia', usersLabel:'Pro', cupo: 20, available:true, image: IMG.canva,
          desc:'Canva Pro por 3 a√±os.',
          benefits:['M√°ximo ahorro','Recursos Pro','Dise√±o pro','Soporte'],
          notes:'3 a√±os.'
        },

        // Autodesk
        {
          id:'autodesk-1y-15',
          name:'Autodesk Suite ‚Äî 1 a√±o',
          price:15,
          cat:'otros',
          saleType:'Por menor',
          cycle:'Anual',
          device:'PC',
          usersLabel:'Suite',
          cupo: 8,
          available:true,
          image: IMG.autodesk,
          desc:'Suite Autodesk 1 a√±o (principales herramientas CAD/BIM).',
          benefits:[
            'AutoCAD / AutoCAD LT',
            'Revit (Architecture/Structure/MEP)',
            'Civil 3D / Navisworks',
            '3ds Max / Maya (seg√∫n disponibilidad)',
            'Soporte y gu√≠a'
          ],
          notes:'Incluye los m√°s importantes. Para lista completa, consulta.'
        },

        // STREAM (ejemplos)
        { id:'netflix-8', name:'Netflix Premium ‚Äî 1 mes', price:8, cat:'streaming', saleType:'Por menor', cycle:'Mensual', device:'TV/PC/M√≥vil', usersLabel:'Premium', cupo: 35, available:true, image: IMG.netflix,
          desc:'Netflix Premium mensual.',
          benefits:['Perfil','HD/4K','Entrega inmediata','Soporte'],
          notes:'Sujeto a disponibilidad.'
        },
        { id:'disney-8', name:'Disney+ Premium ‚Äî 1 mes', price:8, cat:'streaming', saleType:'Por menor', cycle:'Mensual', device:'Multi-dispositivo', usersLabel:'Premium', cupo: 20, available:true, image: IMG.disney,
          desc:'Disney+ Premium mensual.',
          benefits:['Cat√°logo familiar','Multi dispositivo','Soporte'],
          notes:'Sujeto a disponibilidad.'
        },
        { id:'hbomax-7', name:'HBO Max ‚Äî 1 mes', price:7, cat:'streaming', saleType:'Por menor', cycle:'Mensual', device:'Multi-dispositivo', usersLabel:'Max', cupo: 22, available:true, image: IMG.hbomax,
          desc:'HBO Max mensual.',
          benefits:['Series top','Pel√≠culas','Soporte'],
          notes:'Sujeto a disponibilidad.'
        },
        { id:'prime-8', name:'Prime Video ‚Äî 1 mes', price:8, cat:'streaming', saleType:'Por menor', cycle:'Mensual', device:'Multi-dispositivo', usersLabel:'Prime', cupo: 22, available:true, image: IMG.prime,
          desc:'Prime Video mensual.',
          benefits:['Estrenos','Cat√°logo','Soporte'],
          notes:'Sujeto a disponibilidad.'
        },
        { id:'vix-7', name:'ViX ‚Äî 1 mes', price:7, cat:'streaming', saleType:'Por menor', cycle:'Mensual', device:'Multi-dispositivo', usersLabel:'ViX', cupo: 14, available:true, image: IMG.vix,
          desc:'ViX mensual.',
          benefits:['Contenido latino','Soporte'],
          notes:'Sujeto a disponibilidad.'
        },
        { id:'crunchy-8', name:'Crunchyroll ‚Äî 1 mes', price:8, cat:'streaming', saleType:'Por menor', cycle:'Mensual', device:'Multi-dispositivo', usersLabel:'Anime', cupo: 16, available:true, image: IMG.crunchy,
          desc:'Crunchyroll mensual.',
          benefits:['Anime sin anuncios','Estrenos','Soporte'],
          notes:'Sujeto a disponibilidad.'
        },
        { id:'directv-8', name:'DirecTV ‚Äî 1 mes', price:8, cat:'streaming', saleType:'Por menor', cycle:'Mensual', device:'TV/PC/M√≥vil', usersLabel:'TV', cupo: 10, available:true, image: IMG.directv,
          desc:'DirecTV mensual.',
          benefits:['Canales','Eventos','Soporte'],
          notes:'Sujeto a disponibilidad.'
        },
        { id:'youtube-7', name:'YouTube Premium ‚Äî 1 mes', price:7, cat:'musica', saleType:'Por menor', cycle:'Mensual', device:'Multi-dispositivo', usersLabel:'Premium', cupo: 18, available:true, image: IMG.youtube,
          desc:'YouTube Premium mensual.',
          benefits:['Sin anuncios','Segundo plano','Descargas'],
          notes:'Sujeto a disponibilidad.'
        },

        // PROVEEDORES (cuentas completas)
        {
          id:'wh-gpt-plus-40',
          name:'ChatGPT Plus ‚Äî Cuenta completa (Proveedor)',
          price:40,
          cat:'ai',
          saleType:'Cuentas completas',
          cycle:'Mensual',
          device:'Cuenta completa',
          usersLabel:'Proveedor',
          cupo: 0,
          available:false, // AGOTADO como pediste
          image: IMG.chatgpt,
          desc:'Cuenta completa para proveedor (agotado).',
          benefits:['Cuenta completa','Control total','Soporte proveedor'],
          notes:'Actualmente sin cupo.'
        }
      ];

      const SHOWCASE_IDS = ['gpt-plus-18','canva-1y-10','perplexity-15','gemini-pro-15','autodesk-1y-15','capcut-pro-10'];

      /* =========================
         Carrito compartido
      ========================= */
      const readCart = () => { try { return JSON.parse(localStorage.getItem(CART_KEY)||'[]'); } catch(e){ return []; } };
      const writeCart = (arr) => localStorage.setItem(CART_KEY, JSON.stringify(arr));

      window.Cart = window.Cart || {
        add: (item) => {
          const items = readCart();
          const idx = items.findIndex(i => i.id === item.id);
          if(idx>-1) items[idx].qty += (item.qty||1);
          else items.push({ id:item.id, nombre:item.nombre, precio:Number(item.precio), imagen:item.imagen||'', qty:item.qty||1 });
          writeCart(items);
          return items;
        },
        items: () => readCart(),
        count: () => readCart().reduce((a,b)=>a+b.qty,0),
        clear: () => writeCart([])
      };

      function syncHeaderBadges(){
        const c = Cart.count();
        ['headerCartBadge','headerCartBadgeSm','headerCartBadge2'].forEach(id=>{
          const el = document.getElementById(id);
          if(el) el.textContent = c;
        });
      }

      /* =========================
         Helpers UI
      ========================= */
      const moneyPen = n => 'S/ ' + (Number(n)||0).toFixed(2);
      const moneyUsd = n => '$ ' + (Number(n)||0).toFixed(2);

      function showToast(msg){
        const toast = document.getElementById('toastMini');
        const txt = document.getElementById('toastText');
        if(!toast || !txt) return;
        txt.textContent = msg || 'Listo';
        toast.classList.add('show');
        setTimeout(()=> toast.classList.remove('show'), 1300);
      }

      function getParam(name){
        try { return new URLSearchParams(window.location.search).get(name); }
        catch(e){ return null; }
      }

      function normalizeQty(){
        const inp = document.getElementById('qtyInput');
        let q = parseInt((inp.value||'').replace(/\D/g,''),10);
        if(!q || q<1) q=1;
        if(q>99) q=99;
        inp.value = String(q);
        return q;
      }

      function catLabel(cat){
        const map = { ai:'AI', streaming:'Streaming', musica:'M√∫sica', gaming:'Gaming', otros:'Otros' };
        return map[cat] || 'Producto';
      }

      function buildChips(p){
        const chips = [];
        const ok = p.available && (p.cupo==null || p.cupo>0);

        chips.push({
          cls: ok ? 'ok' : 'bad',
          icon: ok ? 'fa-check-circle' : 'fa-times-circle',
          text: ok ? 'Disponible' : 'Agotado'
        });

        chips.push({
          cls: ok ? 'soft' : 'bad',
          icon: 'fa-users',
          text: (p.cupo==null) ? 'Cupo: ‚àû' : ('Cupo: ' + p.cupo)
        });

        chips.push({ cls:'', icon:'fa-calendar-alt', text: p.cycle || '‚Äî' });
        chips.push({ cls:'', icon:'fa-laptop', text: p.device || 'Multi-dispositivo' });
        chips.push({ cls:'', icon:'fa-tags', text: catLabel(p.cat) });

        return chips;
      }

      function setSoldOutUI(isSoldOut){
        const overlay = document.getElementById('soldOutOverlay');
        const btnAdd = document.getElementById('btnAdd');
        const btnBuy = document.getElementById('btnBuy');
        overlay.style.display = isSoldOut ? '' : 'none';
        btnAdd.disabled = isSoldOut;
        btnBuy.disabled = isSoldOut;
        if(isSoldOut){
          btnAdd.classList.add('btn-secondary');
          btnAdd.classList.remove('btn-primary');
          btnBuy.classList.add('btn-secondary');
          btnBuy.classList.remove('btn-dark');
        }else{
          btnAdd.classList.add('btn-primary');
          btnAdd.classList.remove('btn-secondary');
          btnBuy.classList.add('btn-dark');
          btnBuy.classList.remove('btn-secondary');
        }
      }

      /* =========================
         Render carousel (producto + showcase)
      ========================= */
      function uniqueSlides(arr){
        const seen = new Set();
        const out = [];
        for(const s of arr){
          const key = (s.href||'') + '|' + (s.img||'');
          if(seen.has(key)) continue;
          seen.add(key);
          out.push(s);
        }
        return out;
      }

      function renderCarousel(product){
        const indicators = document.getElementById('mediaIndicators');
        const slidesEl = document.getElementById('mediaSlides');
        indicators.innerHTML = '';
        slidesEl.innerHTML = '';

        const baseSlides = (product.gallery && product.gallery.length)
          ? product.gallery.slice()
          : [];

        // si no hay gallery, usamos showcase directo
        const showcaseSlides = SHOWCASE_IDS
          .map(id => PRODUCTS.find(x=>x.id===id))
          .filter(Boolean)
          .map(p => ({
            img: p.image,
            label: p.name,
            href: 'detail.html?id=' + encodeURIComponent(p.id)
          }));

        const slides = uniqueSlides([...baseSlides, ...showcaseSlides]).slice(0, 10);

        slides.forEach((s, idx) => {
          const li = document.createElement('li');
          li.setAttribute('data-target', '#mediaCarousel');
          li.setAttribute('data-slide-to', String(idx));
          if(idx===0) li.className = 'active';
          indicators.appendChild(li);

          const item = document.createElement('div');
          item.className = 'carousel-item' + (idx===0 ? ' active' : '');

          const a = document.createElement('a');
          a.className = 'media-slide';
          a.href = s.href || '#';
          a.title = s.label || 'Ver';

          const img = document.createElement('img');
          img.src = s.img;
          img.alt = s.label || 'Imagen';
          img.loading = 'lazy';
          img.decoding = 'async';
          img.referrerPolicy = 'no-referrer';
          img.onerror = function(){
            // fallback minimal
            this.style.display = 'none';
          };

          a.appendChild(img);
          item.appendChild(a);
          slidesEl.appendChild(item);
        });
      }

      function renderRecommended(currentId){
        const row = document.getElementById('recommendedRow');
        row.innerHTML = '';

        const picks = SHOWCASE_IDS
          .filter(id => id !== currentId)
          .map(id => PRODUCTS.find(p=>p.id===id))
          .filter(Boolean)
          .slice(0,6);

        picks.forEach(p=>{
          const ok = p.available && (p.cupo==null || p.cupo>0);
          const col = document.createElement('div');
          col.className = 'col-lg-4 col-md-6 col-sm-6 pb-3';
          col.innerHTML = `
            <div class="bg-light panel p-3" style="height:100%;">
              <a href="detail.html?id=${encodeURIComponent(p.id)}" style="text-decoration:none;">
                <div style="height:120px; border-radius:14px; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg,#fff,#f3f6ff); border:1px solid rgba(0,0,0,.08);">
                  <img src="${p.image}" alt="${p.name}" style="max-width:75%; max-height:70px; object-fit:contain;" loading="lazy" decoding="async" referrerpolicy="no-referrer">
                </div>
                <h6 class="mt-3 mb-1" style="font-weight:900;">${p.name}</h6>
              </a>
              <div class="d-flex align-items-center justify-content-between mt-2">
                <div style="font-weight:900;">${p.price==null ? 'Consultar' : moneyPen(p.price)}</div>
                <span class="chip ${ok?'ok':'bad'}"><i class="fas ${ok?'fa-check-circle':'fa-times-circle'}"></i> ${ok?'Disponible':'Agotado'}</span>
              </div>
            </div>
          `;
          row.appendChild(col);
        });
      }

      /* =========================
         Render product
      ========================= */
      function renderProduct(product){
        document.getElementById('productTitle').textContent = product.name;

        const ok = product.available && (product.cupo==null || product.cupo>0);
        setSoldOutUI(!ok);

        document.getElementById('saleTypeText').textContent = product.saleType || 'Por menor';
        document.getElementById('metaLeft').textContent = `${catLabel(product.cat)} ¬∑ ${product.saleType || 'Por menor'}`;

        // Price
        const priceEl = document.getElementById('productPrice');
        const usdEl = document.getElementById('productUsd');

        if(product.price==null){
          priceEl.textContent = 'Consultar';
          usdEl.textContent = '';
        }else{
          priceEl.textContent = moneyPen(product.price);
          usdEl.textContent = `‚âà ${moneyUsd(product.price / FX)} USD`;
        }

        // Desc
        document.getElementById('productDesc').textContent = product.desc || 'Servicio digital con entrega inmediata.';
        document.getElementById('descLong').textContent = product.desc || 'Servicio digital con entrega inmediata.';

        // Chips
        const chipsRow = document.getElementById('chipsRow');
        chipsRow.innerHTML = '';
        buildChips(product).forEach(c=>{
          const span = document.createElement('span');
          span.className = 'chip ' + (c.cls||'');
          span.innerHTML = `<i class="fas ${c.icon}"></i> ${c.text}`;
          chipsRow.appendChild(span);
        });

        // Benefits
        const ul = document.getElementById('benefitsList');
        ul.innerHTML = '';
        (product.benefits || []).forEach(b=>{
          const li = document.createElement('li');
          li.textContent = b;
          ul.appendChild(li);
        });

        // Info tab
        document.getElementById('infoCycle').textContent = `Duraci√≥n: ${product.cycle || '‚Äî'}`;
        document.getElementById('infoDevice').textContent = `Dispositivos: ${product.device || '‚Äî'}`;
        document.getElementById('infoNotes').textContent = `Notas: ${product.notes || '‚Äî'}`;

        // Carousel
        renderCarousel(product);

        // Recommended
        renderRecommended(product.id);

        // Media caption
        document.getElementById('mediaCaption').textContent = ok ? 'Galer√≠a / Recomendados' : 'Agotado (sin cupo)';
      }

      /* =========================
         Bind qty + add + buy
      ========================= */
      function bindActions(getCurrentProduct){
        const minus = document.querySelector('.btn-minus');
        const plus  = document.querySelector('.btn-plus');
        const inp   = document.getElementById('qtyInput');
        const btnAdd = document.getElementById('btnAdd');
        const btnBuy = document.getElementById('btnBuy');

        minus.addEventListener('click', ()=>{ inp.value = Math.max(1, (parseInt(inp.value)||1) - 1); });
        plus.addEventListener('click', ()=>{ inp.value = Math.min(99, (parseInt(inp.value)||1) + 1); });
        inp.addEventListener('input', normalizeQty);
        inp.addEventListener('blur', normalizeQty);

        function addToCart(){
          const p = getCurrentProduct();
          const ok = p.available && (p.cupo==null || p.cupo>0);
          if(!ok){ showToast('Sin cupo / Agotado'); return; }

          const qty = normalizeQty();
          Cart.add({ id:p.id, nombre:p.name, precio:(p.price||0), imagen:p.image, qty });
          syncHeaderBadges();
          showToast('A√±adido: ' + p.name);
        }

        btnAdd.addEventListener('click', addToCart);
        btnBuy.addEventListener('click', ()=>{
          addToCart();
          setTimeout(()=>{ window.location.href = 'checkout.html'; }, 250);
        });
      }

      /* =========================
         WhatsApp badge hide
      ========================= */
      (function(){
        const btn = document.getElementById('whatsappFab');
        const badge = document.getElementById('whatsappBadge');
        try { if(sessionStorage.getItem('waBadgeHidden')==='1'){ badge.style.display='none'; } } catch(e){}
        btn.addEventListener('click', function(){
          badge.style.display='none';
          try { sessionStorage.setItem('waBadgeHidden','1'); } catch(e){}
        });
      })();

      /* =========================
         INIT
      ========================= */
      let currentProduct = null;

      const reqId = getParam('id') || 'gpt-plus-18';
      currentProduct = PRODUCTS.find(p=>p.id===reqId) || PRODUCTS[0];

      renderProduct(currentProduct);
      bindActions(()=>currentProduct);
      syncHeaderBadges();

      window.addEventListener('storage', (e)=>{
        if(e.key===CART_KEY) syncHeaderBadges();
      });

    })();
  </script>
</body>
</html>
